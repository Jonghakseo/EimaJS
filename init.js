#!/usr/bin/env node
"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.eimaInit=eimaInit;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_chalk=_interopRequireDefault(require("chalk")),_inquirer=_interopRequireDefault(require("inquirer")),_gradientString=_interopRequireDefault(require("gradient-string")),_chalkAnimation=_interopRequireDefault(require("chalk-animation")),_figlet=_interopRequireDefault(require("figlet")),_nanospinner=require("nanospinner"),_util=require("./util"),_constants=require("./constants"),sleep=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:900;return new Promise(function(b){return setTimeout(b,a)})},log=console.log,msg=function(a){return log(_chalk["default"].greenBright(a))},err=function(a){return log(_chalk["default"].red(a))};function welcome(){return _welcome.apply(this,arguments)}function _welcome(){return _welcome=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(){return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(0,_figlet["default"])("Welcome to EIMA!",function(a,b){console.log(_gradientString["default"].pastel.multiline(b)+"\n")}),a.next=3,sleep();case 3:case"end":return a.stop();}},a)})),_welcome.apply(this,arguments)}function questionEsVersion(){return _questionEsVersion.apply(this,arguments)}function _questionEsVersion(){return _questionEsVersion=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(){var b;return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_inquirer["default"].prompt({name:"questionEs",type:"list",message:"Please select version of ecma script: \n",choices:["es5(require)","es6(import)"]});case 2:return b=a.sent,a.abrupt("return",b.questionEs);case 4:case"end":return a.stop();}},a)})),_questionEsVersion.apply(this,arguments)}function questionFolderPath(){return _questionFolderPath.apply(this,arguments)}function _questionFolderPath(){return _questionFolderPath=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function b(a){var c;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_inquirer["default"].prompt({name:"questionFolderPath",type:"input",message:"(".concat(a,"/").concat(_constants.TOTAL_STEP,") Optional || Please enter the asset folder path.: \n"),default:function(){return"assets"}});case 2:return c=b.sent,b.abrupt("return",c.questionFolderPath);case 4:case"end":return b.stop();}},b)})),_questionFolderPath.apply(this,arguments)}function questionFileToExport(){return _questionFileToExport.apply(this,arguments)}function _questionFileToExport(){return _questionFileToExport=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function b(a){var c;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_inquirer["default"].prompt({name:"questionFileToExport",type:"input",message:"(".concat(a,"/").concat(_constants.TOTAL_STEP,") Optional || Please specify the file you want to export.: \n"),default:function(){return"src/assets.js"}});case 2:return c=b.sent,b.abrupt("return",c.questionFileToExport);case 4:case"end":return b.stop();}},b)})),_questionFileToExport.apply(this,arguments)}function questionVariableName(){return _questionVariableName.apply(this,arguments)}function _questionVariableName(){return _questionVariableName=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function b(a){var c;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_inquirer["default"].prompt({name:"questionVariableName",type:"input",message:"(".concat(a,"/").concat(_constants.TOTAL_STEP,") Optional || Please specify the object's variable name that contains all assets you want to export.: \n"),default:function(){return"ASSETS"}});case 2:return c=b.sent,b.abrupt("return",c.questionVariableName);case 4:case"end":return b.stop();}},b)})),_questionVariableName.apply(this,arguments)}function questionVariableNamingType(){return _questionVariableNamingType.apply(this,arguments)}function _questionVariableNamingType(){return _questionVariableNamingType=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function b(a){var c;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_inquirer["default"].prompt({name:"questionVariableNamingType",type:"list",message:"(".concat(a,"/").concat(_constants.TOTAL_STEP,") Optional || Please select the variable casing.: \n"),choices:_constants.VARIABLE_CASING,default:function(){return _constants.VARIABLE_CASING[_constants.VARIABLE_CASING.length-1]}});case 2:return c=b.sent,b.abrupt("return",c.questionVariableNamingType);case 4:case"end":return b.stop();}},b)})),_questionVariableNamingType.apply(this,arguments)}function questionIncludeExt(){return _questionIncludeExt.apply(this,arguments)}function _questionIncludeExt(){return _questionIncludeExt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function b(a){var c;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_inquirer["default"].prompt({name:"questionIncludeExt",type:"list",message:"(".concat(a,"/").concat(_constants.TOTAL_STEP,") Optional || Do you want to include the ext of the file in variable name?: \n"),choices:["Y","N"],default:function(){return"Y"}});case 2:return c=b.sent,b.abrupt("return",c.questionIncludeExt);case 4:case"end":return b.stop();}},b)})),_questionIncludeExt.apply(this,arguments)}function questionCheckAnswers(){return _questionCheckAnswers.apply(this,arguments)}function _questionCheckAnswers(){return _questionCheckAnswers=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function b(a){var c,d;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_inquirer["default"].prompt((c={name:"questionCheckAnswers",type:"input",message:"es ver -------------- ".concat(a.target,"\n\n    assets path-------------- ").concat(a.assetPath,"\n\n    output path -------------- ").concat(a.outputPath,"\n\n    variable name -------------- ").concat(a.variableName,"\n\n    variable casing -------------- ").concat(a.variableNameCasing,"\n\n    include ext -------------- ").concat(a.isIncludingExt,"\n\n    ")},(0,_defineProperty2["default"])(c,"type","list"),(0,_defineProperty2["default"])(c,"choices",["Y","N"]),c));case 2:return d=b.sent,b.abrupt("return",d.questionCheckAnswers);case 4:case"end":return b.stop();}},b)})),_questionCheckAnswers.apply(this,arguments)}function eimaInit(){return _eimaInit.apply(this,arguments)}function _eimaInit(){return _eimaInit=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(){var b,c,d,e,f,g,h,i,j,k,l,m,n;return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=!1,c={},a.next=4,welcome();case 4:return a.next=6,questionEsVersion();case 6:return d=a.sent,c.target=d.split("(")[0],a.next=10,questionFolderPath(1);case 10:return e=a.sent,c.assetPath=e,a.next=14,questionFileToExport(2);case 14:return f=a.sent,c.outputPath=f,a.next=18,questionVariableName(3);case 18:return g=a.sent,c.variableName=g,a.next=22,questionVariableNamingType(4);case 22:return h=a.sent,c.variableNameCasing=h,a.next=26,questionIncludeExt(5);case 26:return i=a.sent,c.isIncludingExt="y"===i.toLowerCase(),a.next=30,questionCheckAnswers(c);case 30:if(j=a.sent,"y"===j.toLowerCase()?(b=!0,l=(0,_nanospinner.createSpinner)("").start(),l.success({text:"Great job! We are almost there!"})):(k=(0,_nanospinner.createSpinner)("").start(),k.error({text:"\uD83D\uDC80\uD83D\uDC80\uD83D\uDC80 Setup has been stoped."}),process.exit(1)),b){a.next=34;break}return a.abrupt("return");case 34:return a.prev=34,a.next=37,(0,_util.createConfigFile)(c);case 37:return console.clear(),m=_chalkAnimation["default"].rainbow("Setup has been completed."),a.next=41,sleep();case 41:m.stop(),n=(0,_nanospinner.createSpinner)("").start(),n.success({text:"Starting EIMA"}),a.next=49;break;case 46:a.prev=46,a.t0=a["catch"](34),console.error(a.t0);case 49:case"end":return a.stop();}},a,null,[[34,46]])})),_eimaInit.apply(this,arguments)}