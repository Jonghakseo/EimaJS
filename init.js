#!/usr/bin/env node
"use strict";var __awaiter=function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new(c||(c=Promise))(function(c,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?c(a.value):e(a.value).then(g,h)}i((d=d.apply(a,b||[])).next())})},__generator=function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;k;)try{if(e=1,h&&(i=2&c[0]?h["return"]:c[0]?h["throw"]||((i=h["return"])&&i.call(h),0):h.next)&&!(i=i.call(h,c[1])).done)return i;switch((h=0,i)&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return k.label++,{value:c[1],done:!1};case 5:k.label++,h=c[1],c=[0];continue;case 7:c=k.ops.pop(),k.trys.pop();continue;default:if((i=k.trys,!(i=0<i.length&&i[i.length-1]))&&(6===c[0]||2===c[0])){k=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){k.label=c[1];break}if(6===c[0]&&k.label<i[1]){k.label=i[1],i=c;break}if(i&&k.label<i[2]){k.label=i[2],k.ops.push(c);break}i[2]&&k.ops.pop(),k.trys.pop();continue;}c=b.call(a,k)}catch(a){c=[6,a],h=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,h,i,j,k={label:0,sent:function sent(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return j={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j};Object.defineProperty(exports,"__esModule",{value:!0}),exports.eimaInit=void 0;var inquirer=require("inquirer"),gradient=require("gradient-string"),chalkAnimation=require("chalk-animation"),figlet=require("figlet"),nanospinner_1=require("nanospinner"),util_1=require("./util"),constants_1=require("./constants"),util_2=require("./util");function welcome(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return figlet("Welcome to EIMA!",function(a,b){console.log(gradient.pastel.multiline(b)+"\n")}),[4,(0,util_2.sleep)()];case 1:return a.sent(),[2];}})})}function questionEsVersion(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(b){switch(b.label){case 0:return[4,inquirer.prompt({name:"questionEs",type:"list",message:"Please select version of ecma script: \n",choices:["es5(require)","es6(import)"]})];case 1:return a=b.sent(),[2,a.questionEs];}})})}function questionFolderPath(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return[4,inquirer.prompt({name:"questionFolderPath",type:"input",message:"(".concat(a,"/").concat(constants_1.TOTAL_STEP,") Optional || Please enter the asset folder path.: \n"),default:function _default(){return"assets"}})];case 1:return b=c.sent(),[2,b.questionFolderPath];}})})}function questionFileToExport(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return[4,inquirer.prompt({name:"questionFileToExport",type:"input",message:"(".concat(a,"/").concat(constants_1.TOTAL_STEP,") Optional || Please specify the file you want to export.: \n"),default:function _default(){return"src/assets.js"}})];case 1:return b=c.sent(),[2,b.questionFileToExport];}})})}function questionVariableName(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return[4,inquirer.prompt({name:"questionVariableName",type:"input",message:"(".concat(a,"/").concat(constants_1.TOTAL_STEP,") Optional || Please specify the object's variable name that contains all assets you want to export.: \n"),default:function _default(){return"ASSETS"}})];case 1:return b=c.sent(),[2,b.questionVariableName];}})})}function questionVariableNamingType(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return[4,inquirer.prompt({name:"questionVariableNamingType",type:"list",message:"(".concat(a,"/").concat(constants_1.TOTAL_STEP,") Optional || Please select the variable casing.: \n"),choices:constants_1.VARIABLE_CASING,default:function _default(){return constants_1.VARIABLE_CASING[constants_1.VARIABLE_CASING.length-1]}})];case 1:return b=c.sent(),[2,b.questionVariableNamingType];}})})}function questionIncludeExt(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return[4,inquirer.prompt({name:"questionIncludeExt",type:"list",message:"(".concat(a,"/").concat(constants_1.TOTAL_STEP,") Optional || Do you want to include the ext of the file in variable name?: \n"),choices:["Y","N"],default:function _default(){return"Y"}})];case 1:return b=c.sent(),[2,b.questionIncludeExt];}})})}function questionCheckAnswers(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return[4,inquirer.prompt({name:"questionCheckAnswers",message:"es ver -------------- ".concat(a.target,"\n\n    assets path-------------- ").concat(a.assetPath,"\n\n    output path -------------- ").concat(a.outputPath,"\n\n    variable name -------------- ").concat(a.variableName,"\n\n    variable casing -------------- ").concat(a.variableNameCasing,"\n\n    include ext -------------- ").concat(a.isIncludingExt,"\n\n    "),type:"list",choices:["Y","N"]})];case 1:return b=c.sent(),[2,b.questionCheckAnswers];}})})}function eimaInit(){return __awaiter(this,void 0,void 0,function(){var a,b,c,d,e,f,g,h,i,j,j,k,j,l;return __generator(this,function(m){switch(m.label){case 0:return a=!1,b={target:"es6",assetPath:"",outputPath:"",variableName:"",variableNameCasing:"Camel",isIncludingExt:!0},[4,welcome()];case 1:return m.sent(),[4,questionEsVersion()];case 2:return c=m.sent(),b.target=c.split("(")[0],[4,questionFolderPath(1)];case 3:return d=m.sent(),b.assetPath=d,[4,questionFileToExport(2)];case 4:return e=m.sent(),b.outputPath=e,[4,questionVariableName(3)];case 5:return f=m.sent(),b.variableName=f,[4,questionVariableNamingType(4)];case 6:return g=m.sent(),b.variableNameCasing=g,[4,questionIncludeExt(5)];case 7:return h=m.sent(),b.isIncludingExt="y"===h.toLowerCase(),[4,questionCheckAnswers(b)];case 8:if(i=m.sent(),"y"===i.toLowerCase()?(a=!0,j=(0,nanospinner_1.createSpinner)("").start(),j.success({text:"Great job! We are almost there!"})):(j=(0,nanospinner_1.createSpinner)("").start(),j.error({text:"Setup has been stoped. \uD83D\uDC80"}),process.exit(1)),!a)return[2];m.label=9;case 9:return m.trys.push([9,12,,13]),[4,(0,util_1.createConfigFile)(b)];case 10:return m.sent(),console.clear(),k=chalkAnimation.rainbow("Setup has been completed! \u2705"),[4,(0,util_2.sleep)()];case 11:return m.sent(),k.stop(),j=(0,nanospinner_1.createSpinner)("").start(),j.success({text:"Starting EIMA \uD83D\uDE80"}),[3,13];case 12:return l=m.sent(),console.error(l),[3,13];case 13:return[2];}})})}exports.eimaInit=eimaInit;