"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.eimaInit=eimaInit;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_readline=_interopRequireDefault(require("readline")),_ink=require("./ink"),_util=require("./util");function eimaInit(){var a=_readline["default"].createInterface({input:process.stdin,output:process.stdout,terminal:!1}),b=[];(0,_ink.msg)("Please select version of ecma script: es5(require)/es6(import) [es6]");var c=!1;a.on("line",function(d){var e=d;switch("/"===d.slice()&&((0,_ink.err)("THE FIRST SLASH ON THE PATH IS NOT AVAILABLE."),process.exit()),b.length){case 0:if(e=d||"es6","es6"===e||"es5"===e){b.push(e),(0,_ink.msg)("(1/3) Optional || Please enter the asset folder path. [assets]");break}else return(0,_ink.msg)("Error: Only 2 values(es5/es6) can be received"),process.exit();case 1:e=d||"assets",b.push(e),(0,_ink.msg)("(2/3) Optional || Please specify the file you want to export. [src/assets.js]");break;case 2:e=d||"src/assets.js",b.push(e),(0,_ink.msg)("(3/3) Optional || Please specify the asset variable name you want to export. [ASSETS]");break;case 3:e=d||"ASSETS",b.push(e);var f="Do you wanna start with the current settings? [Y/N]\n            es ver -------------- ".concat(b[0],"\n            assets -------------- ").concat(b[1],"\n            outPath ------------- ").concat(b[2],"\n            variableName -------- ").concat(b[3],"\n    ");(0,_ink.msg)(f);break;case 4:"Y"===d||"y"===d?(c=!0,a.close()):((0,_ink.err)("Stop setting up"),process.exit());}}).on("close",(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(){return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!c){a.next=10;break}return a.prev=1,a.next=4,_util.createConfigFile.apply(void 0,b);case 4:(0,_ink.log)("Setup is complete. --> eima start"),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0);case 10:case"end":return a.stop();}},a,null,[[1,7]])})))}